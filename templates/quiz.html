{% extends "base.html" %}

{% block title %}Quiz{% endblock %}

{% block styles %}
    <!-- Optional additional styles -->
{% endblock %}

{% block content %}
<body class="p-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">Lightning Round</h2>

    <div id="timer" class="fs-4 text-danger fw-semibold">5:00</div>

    <div class="flex-grow-1 ms-4">
      <div class="progress" style="height: 1.5rem;">
        <div id="quizProgress" class="progress-bar bg-primary" style="width: {{ progress }}%;">
          {{ progress }}%
        </div>
      </div>
    </div>
  </div>

  <!-- Question Section -->
  <div class="text-center mb-5">
    <h3 id="question" class="fw-semibold mb-4">{{ question }}</h3>

    <div class="d-grid gap-3 col-6 mx-auto">
      {% for option in options %}
        <button class="btn btn-outline-dark answer-btn">{{ option }}</button>
      {% endfor %}
    </div>
  </div>

  <!-- Next Button -->
  <div class="d-flex justify-content-end">
    <form action="{{ url_for('next_question') }}" method="POST">
      <button type="submit" class="btn btn-primary px-4 py-2" id="nextBtn">Next Question</button>
    </form>
  </div>

</body>
{% endblock %}

{% block scripts %}
<script>
  // Countdown Timer
  let timeLeft = {{ time_left | default(300) }};
  const timerEl = document.getElementById("timer");

  const timerInterval = setInterval(() => {
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      timerEl.textContent = "Time's up!";
      return;
    }
    timeLeft--;
    const minutes = Math.floor(timeLeft / 60);
    const seconds = String(timeLeft % 60).padStart(2, '0');
    timerEl.textContent = `${minutes}:${seconds}`;
  }, 1000);
</script>
{% endblock %}
