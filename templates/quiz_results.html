{% extends "base.html" %}

{% block title %}Practice Results{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/quiz_results.css') }}">

{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="summary-card mx-auto" style="max-width: 700px;">

    <h2 class="fw-bold mb-4">Quiz Results</h2>

    <div class="result-box text-center">
      You got {{ score }}/5 Questions Correct in {{ total_time }} seconds!
    </div>

    <p class="fs-5 text-center mb-4">You gained +{{ xp }} XP!</p>

    <div class="d-flex justify-content-center gap-3 mb-4">
      <a href="{{ url_for('quiz.clear_quiz_session') }}" class="btn btn-outline-dark px-4 py-2">Back Home</a>
      <a href="{{ url_for('home.summary') }}" class="btn btn-outline-dark px-4 py-2">Summary</a>
    </div>

    <!-- XP Bar -->
    <div class="xp-bar mb-4">
      <div class="xp-fill" style="width: {{ xp_progress }}%">XP</div>
    </div>

    <!-- Badge Section -->
    {% if badges %}
    <div class="text-center mt-5">
      <h4 class="fw-bold mb-3">🏅 You earned the following badge{{ badges|length > 1 and 's' or '' }}:</h4>
      <div class="badge-grid">
        {% for badge in badges %}
        <div class="badge-item">
          <img src="{{ url_for('static', filename='img/badges/' ~ badge) }}" alt="{{ badge }}">
          <p class="mt-2 text-center fw-bold">{{ badge.replace('_', ' ').replace('.png', '').title() }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

  </div>
</div>
{% endblock %}
